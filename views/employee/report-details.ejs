<%- include('../includes/head.ejs')%> <%- include('../includes/mav.ejs')%>

<main>
  <% if (isManager) { %>
    <% if (reports.length > 0) { %>
      <div class="grid">
        <% reports.forEach(report => { %>
          <ul class="grid-item">
              <li>report at <%= report.workplace %></li>
              <li>annual leave <%= report.dayLeaveHours.period %></li>
              <li>start at <%= report.startTime %></li>
              <li>finish at <%= report.finishTime %></li>
              <li>over time <%= report.overTime %> h</li>
              <li>total <%= report.totalWorkingTime %> h for today's sessions</li>
              <li>total <%= report.totalSummaryTime %> h of working</li>
              <li> => total <%= report.salary %> $ of month</li>
            </ul>
        <% } %>
        <section class="pagination">
          <% if (currentPage !== 1 && previousPage !== 1) { %>
              <a href="?page=1">1</a>
          <% } %>
          <% if (hasPreviousPage) { %>
              <a href="?page=<%= previousPage %>"><%= previousPage %></a>
          <% } %>
          <a href="?page=<%= currentPage %>" class="active"><%= currentPage %></a>
          <% if (hasNextPage) { %>
              <a href="?page=<%= nextPage %>"><%= nextPage %></a>
          <% } %>
          <% if (lastPage !== currentPage && lastPage !== nextPage) { %>
              <a href="?page=<%= lastPage %>"><%= lastPage %></a>
          <% } %>
          <div>
            <label>
              <select name="pagination">
                <option value="1" default selected>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
              </select>
            </label>
            <input type="submit" value="report/day">
            <!-- later : consider lines -->
          </div>
      </section>
      </div>
      <form action="/delete-report/:<%= report._id %>" method="post">
        <button class="btn" type="submit">delete old reports</button>
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
      </form>
      <form action="/disable-changes/:<%= report._id %>" method="post">
        <button class="btn" type="submit">disable-changes</button>
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
      </form>
    <% } %><% } else { %> <h1>No found report</h1> <% } %>
  <% } else { %> <!-- for iM -->
      <div class="grid">
        <ul class="grid-item">
            <li>report at <%= report.workplace %></li>
            <li>annual leave <%= report.dayLeaveHours.period %></li>
            <li>start at <%= report.startTime %></li>
            <li>finish at <%= report.finishTime %></li>
            <li>over time <%= report.overTime %> h</li>
            <li>total <%= report.totalWorkingTime %> h for today's sessions</li>
            <li>total <%= report.totalSummaryTime %> h of working</li>
            <li>=> total <%= report.salary %> $ of month</li>
        </ul>
      </div>
      <h3>contact to manager :</h3>
      <p>abc <%= reports.report.userId.managerId %></p>
  <% } %> <!-- for iM -->
  
</main>

<%- include('../includes/foot.ejs')%>
